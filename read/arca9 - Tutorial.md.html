<!DOCTYPE html> 
<html> 
<head>
	<title>arca9 tutorial</title> 
	<meta charset="utf-8">
</head>
<body>
	<xmp theme="cerulean" style="display:none;">
## Learning about arca9
#### By [woodenbell](https://github.com/WoodenBell), using [Strapdown](http://strapdownjs.com/)
&nbsp;&nbsp;&nbsp;&nbsp;Arca9 is a XML/HTML template engine based on JSON files and component dependency. The main focus on arca9 is reusability of components, leading to a very, very much easier and simplier template building. Arca9 have various tags with different functions that can be used to build your HTML file in a much easier and simplier way. in this tutorial you will learn the function of each tag and the structure of the JSON files used in the build process.

**Check arca9's npm page [here!](https://www.npmjs.com/package/arca9)**


## Contents
#### - Arca9 methods and vars
#### - Arca9 vars and values
#### - Acessing vars and values elements
#### - Arca9 options
#### - Arca9 special characters
#### - Arca9 tags
#### &nbsp;&nbsp;&nbsp;&nbsp; - Arca9 component
#### &nbsp;&nbsp;&nbsp;&nbsp; - Arca9 var
#### &nbsp;&nbsp;&nbsp;&nbsp; - Arca9 include
#### &nbsp;&nbsp;&nbsp;&nbsp; - Arca9 script/style
#### &nbsp;&nbsp;&nbsp;&nbsp; - Arca9 times
#### &nbsp;&nbsp;&nbsp;&nbsp; - Arca9 foreach
#### - The end
&nbsp;
___

### Arca9 methods and vars
    
    Build methods
    [] = optional
    
    arca9.build(fileName,[destName], [vars]) -> returns undefined
                OR
    arca9.buildStr(str, [vars]) -> returns String  //Vars is optional since 1.1.1
    
    Vars
    
    options (explained below)
    {
        echo: false,
        debug: false,
        cache: true, //since 1.1.0
        autoClearCache: true //since 1.1.0
    }
___
#### Arca9 vars and values
**Vars**: can be passed as arguments in the `build` or `buildStr` methods, or can be imported from _JSON_ files as shown below. Vars can be used inside components JSON files or arca9 tags content. Once imported, vars can be used by all tags (_components_, _foreach_, _etc..._) globally. To represent a _var_, write in the following format:
#### ${var-name}
&nbsp;  
=&gt; **Whitespaces inside brackets will be ignored**

**Vars can also be stored in _JSON_ files and imported by other arca9 components**  
Example:

    {
        "myvar": "myvarval",
        "myvar2": 3,
        "myvarobj": { 
            "attr": "val"
        }
    }

&nbsp;
**Values**: _values_ are used with components, and are the "args" for those components values and attributes. Like _vars_, _values_ can be used in attributes or _arca9_ tags XML content. Unlike _vars_, _values_ are only acessible to _components_, more specifically, to the _components_ which tags received the values (they are like "arguments" passed to components). Values are represented as below:
#### %{value}

### Acessing vars and values elements
If  a _var_ or a _value_ is an array or an object, you can refer to their elements in the following way:
#### ${myvar:element} or %{myval:element}

- Example 1: array value element on index 8: **`%{val:8}`**
- Example 2: object var attribute 'age': **`${var:age}`**  
**The elements can be acessed recursively, this means you can access an array's element on index 0 (that is also an array or object), 
then get the element on index 3 of that element. This is also valid for objects or arrays inside objects and vice-versa.**
- Example 1: **`${var:3:age}`**
- Example 2 **`%{val:4:2:0}`**
- Example 3 **`${var:employees:josh:address}`**
&nbsp;
___
### Arca9 options 
Can be changed by modifying the var options in the `arca9` object.

- **echo**: show build logs or not (`false` by default)
- **debug**: shows debug output or not (`false` by default)
- **cache (since 1.1.0)**: JSON files caching is enabled or not (`true` by default)
- **autoClearCache (since 1.1.0)**: auto cache clear after build is enabled or not (`true` by default)
___
### Arca9 special characters equivalents
- **`&`** becomes **`&0`**
- **`$`** becomes **`&1`**
- **`%`** becomes **`&2`**
- **`;`** becomes **`&3`**
- **`:`** becomes **`&4`**
&nbsp;
___
## Arca9 tags
### Arca9 component
#### &lt;arca9-component&gt;
#### &gt; Keyword: reusability
Pherhaps the main feature in _arca9_ due to it's useful features. A component is nothing more than an HTML element, but represented in JSON. Why and what's special in that? First of all, storing the component in JSON let's you declare your attributes in a better and simplier way than XML. Also, the key point about components is that they are dependency-based. What does that mean? It means that you can build a component and make it dependent to other components or scripts, that will be automatically loaded and included in the build process.

And this is not the only feature. Components can import _vars_ and receive _values_ ("arguments"). Values are passed in the XML tag, and are used only in the requested component.  
  
#### Understanding why componentes are useful
&nbsp;&nbsp;&nbsp;&nbsp;To understand why components make everything much easier let's take a `<button>` for example. Imagine you want to create a cool button with css and javascript that will be used many times in your page. However, you don't want to copy and  paste the button again.Also, you need to use the button in other pages and make sure you had included the needed style and scripts for the button in those pages. Finally, you want the button to be used many times, but with it's color and content different on each case.
  
&nbsp;&nbsp;&nbsp;&nbsp;Well, with a component this becomes 99% easier. First, you will need to create the  a component representing the `<button>`, with all it's attributes and content. What if this buttons depends on another cool element you created? Well, a component can depend on another, which will make _arca9_ automatically load and include it inside. You could create a menu that depends on your cool button too if you wanted to. 
  
&nbsp;&nbsp;&nbsp;&nbsp;But suddenly you remembered`<button>` will also need a script to be ran when the user clicks on it. It will also need a style. Well, the _arca9_ component supports both script and style dependency. How does this works? You will declare the JSON files representing the script and the style in the JSON component file, and _arca9_ will check if it was imported or not. If not, them, if you specified a tag, the script and the style will be imported directly to the tag, otherwise it will seek for the `<head>` tag.  
&nbsp;&nbsp;&nbsp;&nbsp;The style can also be included in the component itself, and will be transformed in an attribute, but it's recommended that you use script-dependence.   
&nbsp;&nbsp;&nbsp;&nbsp;Now imagine you wanted `<button>` many times, but it's content is "Download", and it's color is only _green_. You want the button to have a different content and color for each part of your site. How do you do this? Copying and pasting the `<button>` and changing those attributes? **No way!** You can use values and pass them to the button directly in the `<arca9-component>` tag. By doing this you can reuse your button multiple times while passing different values every time.  
   
#### Tag attributes
#### src:
The component's JSON file source.
#### values-x (_optional_)
The value with name "x" (can be any name) that will be passed to the component builder.
  
#### JSON file attributes
#### import
An array containing strings of _var_ files to be imported (without .json in the name).
  
#### tag-name
String containing the component tag name (example: _div_, _button_, _span_...).
  
#### self-closing
Boolean value indicating if the tag is self-closing or not.
___
**_Question_**: Why can't arca9 just detect if the component has content and, if not, make it automatically self-closing?
  
**_Answer_**: What if you want to create a `<div>` component and you want that div's content to be empty? 
If arca9 automatically made the tag self-closing you would have to use a "hack", by adding an empty content. Not a very good pratice.
___
#### content
An array containing either strings for text nodes, or objects representing sub-components inside the main component (_see below_).  
=&gt; **Supports vars and values (sub-components also support both vars and values)**
  
#### xml-content  (replaces content)
String representing valid XML (please note that when using `xml-content`, `content` will be ignored. Also, `xml-content` doesn't support sub-components.  
=&gt; **Supports vars and values**

#### attr
Object with keys and values representing the tag attributes and it's values (values must be strings).  
=&gt; **Supports tags and values**

  
#### style  
Same as `attr` but with key-val pairs representing _css_ attributes.  
=&gt; **Supports vars and values**
___

**_Question_**: Why style goes outside `attr` instead of being just a key-val pair, since `style` is actually an attribute?
  
**_Answer_**: For two reasons. First, style is different from other attributes, it is like "embedded css" in the tag, also it represents the  tag appearance, making it an speacial attribute. Second reason, `style` attributes have keys and vals representing css attributes, so `style` has to be an object, and if it was inside `attr`, it would break the string values rule. Also, it adds more legibility to the _JSON_ component, separing style (that is a special attribute, as said before), from the rest of normal attributes.
  
  ___
  
#### dependencies (optional)
An object representing script/style dependencies that contains two attributes:
- **Script**: an array containing script _JSON_ files that the component depends on.
- **Style**: an array containing style _JSON_ files that the component depends on.  
=&gt; **File names in the arrays go without _.json_ extension**
___
### Sub-components
Sub-components can be written in two ways:

#### Content components
This sub-components object have all the same attributes as components, except for `import`. Sub-components with content also inheirit vars and values from their parent components.
#### External component
This sub-component object will only have to attributes:
- **`src`**: The _JSON_ file (with extension) representing the sub-component
- **`values`**: An object containing key-value pairs of _values_ that will be passed to the external component.
  
=&gt; **The external component in the _JSON_ file is like any other normal component**

**Enough examples, huh? Let's take a look at how a component file looks like!**
_The example above is a "commented" JSON file_: **my_button.json**

    {
        "import": ["colors"], //Imports colors.json 
        
        "tag-name": "button",
        "self-closing": false,
        
        "content": [
            {
            "src": "download-text.json",
                "values": {
    	            "content": "Download"
                }
            },
        ", click me"
        ],
    
        "style": {//Note that the style attribute doesn't go into "attr" like other attributes
            "border-radius": "6px",
            "border-style": "solid",
            "border-color": "${emerald}", //Var with name emerald (imported from colors)
            "border-width": "%{border}", //Value with name border
            "background-color": "white"
        },

    "attr": {
            "name": "download-button",
            "onclick": "btn_download()"
        }

    }
**Result in XML**

    <button name="download-button" onclick="btn_download()" style="border-radius: 6px;
    border-style: solid; border-color: #2ecc71; border-width: 7px; background-color: white; ">
    <span style="color: #2ecc71; "><span>Download</span></span>, click me</button>
    
=&gt; **Please note that the XML generated by arca9 is not formatted, you will need to format it using a tool or manually**
___
### Arca9 var
#### &lt;arca9-var&gt;
&nbsp;
The var tag in _arca9_ has the purpose of representing _vars_ inside the _XML_ document, and not only inside _JSON_ files or _arca9_ tags content.

#### Tag attributes
#### name
The represented variable name.

#### dependencies (optional)
A string representing a list with the names of _JSON_ files containing variables (without .json extension, separated by `;`  that will be imported.

The tag will be replaced by an text node containing the string format of the _var_ value.
___
### Arca9 include
#### &lt;arca9-include&gt;
&nbsp;
Simply includes the target file into the _XML_. Doesn't support _vars_ nor _values_.

#### Tag attributes
#### src
The source of the file that will be included (including file extension).
___
### Arca9 script/style
#### &lt;arca9-script&gt; or &lt;arca9-style&gt;
A script or style representaton that deals with script/style dependencies and support vars (except for external, see below).

#### Tag attributes
#### src
The source for the script/style JSON file.

#### JSON file attributes

#### dependencies (before 1.0.5)
- if **script**: an array containing script JSON filenames that the script depends on (without _.json_ extension).
- if **style**: an array containing style JSON filenames that the style depends on (without _.json_ extension).

#### dependencies (after 1.0.5) (optional)
An object containg two attributes, `script` and `style`

- **`script`**: an array containing script JSON filenames that the script/style depends on (without _.json_ extension).
- **`style`**: an array containing style JSON filenames that the style/style depends on (without _.json_ extension).

#### content
An array containing the content lines or an string containing the content.  
=&gt; **Supports vars**

#### src (replaces content)
A string containing the script/style filename (with extension). If this attribute is present, the resulting that will not contain the file contents. Instead, it will indicate the filename as an external script/style.

#### content-src (replaces content)
Same as `src` but will include the external file content in the resulting tag.
  
=&gt; **Does not supports tags to avoid conflicts, like, for example, javascript's template strings, that use the same format as arca9's _vars_: `${}`**

#### attr (optional)
Object with key-value pairs of strings representing the tag attributes.  
=&gt; **Supports vars (since 1.0.6)**
___
### Arca9 times
#### &lt;arca9-times&gt;
Repeats it's content _n_ times, as specified by the attribute (see below).

#### Tag attributes
#### value
Contains a number representing the times that the content will be repeated.  
=&gt; **Accepts a var instead of a literal number, but the var must be a valid number.**

#### dependencies (optional)
A string representing a list with the names of JSON files containing variables (without .json extension), separated by `;` that will be imported

#### Tag content
Tags and text nodes that will be repeated.  
=&gt; **Supports vars and a special value: `%{i}`, that represents the number of the repetition.**
___
### Arca9 foreach
#### &lt;arca9-foreach&gt;
Similar to `<arca9-times>`, but iterates over an array or object variable, repeating the content

#### Tag attributes
#### name
The name of the variable that will be iterated (must be array or object).

#### dependencies (optional)
A string representing a list with the names of JSON files containing variables (without .json extension, separated by `;` that will be imported.

#### Tag content
Content (including tags) that will be repeated.  
=&gt; **Supports vars and two special values: `%{k}` and `%{v}`**

**`%{k}` is the current key in the iteration (index if the variable is an array).**
**`%{v}` is the current value in the iteration.**
___
#### The end.
&nbsp;&nbsp;&nbsp;Thanks for reading and I hope you liked _arca9_. If you did, please give the repository a star. Dont' be afraid to make a pull request or open an issue if you feel you can help make _arca9_ better. New features may be added in the future.

**Install**
> npm install arca9

	</xmp>
	<script src="strapdown.js"></script>
</body>
</html>